(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3271"],{"3V6B":function(e,t,a){"use strict";a.r(t);var n=a("QbLZ"),i=a.n(n),r=a("4d7F"),s=a.n(r),o=a("jWXv"),l=a.n(o),d=a("rfXi"),c=a.n(d),u=a("14Xm"),v=a.n(u),p=a("D3Ub"),m=a.n(p),h=a("P2sY"),f=a.n(h),g=a("MT78"),w=a.n(g),C=a("v7LQ"),_=a("kzTS"),b={name:"OceanengineSalesDashboard",data:function(){return{productLineOptions:_.a,filters:{windowType:"7",customWindow:30,productLine:"ALL",onlySelf:!1,riskLevel:"ALL"},overview:{},overviewLoading:!1,selfOverview:{},selfOverviewLoading:!1,lineOverviews:{AD:{},LOCAL:{},QIANCHUAN:{}},lineOverviewLoading:!1,sales:[],companies:[],advertisers:[],salesLoading:!1,companyLoading:!1,advertiserLoading:!1,allowedSaleUserIds:[],selectedSaleUserId:null,selectedAdvCompanyId:null,pagination:{sales:{currentPage:1,pageSize:10},companies:{currentPage:1,pageSize:10},advertisers:{currentPage:1,pageSize:10}},customerDialog:{visible:!1,loading:!1,title:"",type:"health",riskLevel:"",list:[]},customerDialogPagination:{currentPage:1,pageSize:10},trendDialog:{visible:!1,loading:!1,data:[],windowType:"30",customWindow:30,advCompanyId:null,companyName:"",mode:"company",saleUserId:null,saleName:""},trendChart:null}},computed:{isAdminUser:function(){var e=this.$store.getters.userInfo||{};return!!(e.isAdmin||e.is_admin||e.admin||e.superAdmin||e.isSuperAdmin||"admin"===e.username)},effectiveWindow:function(){var e="custom"===this.filters.windowType?Number(this.filters.customWindow||0):Number(this.filters.windowType||7);return e>0?e:7},windowLabel:function(){return"近"+this.effectiveWindow+"天"},productLineLabel:function(){return Object(_.f)(this.filters.productLine)},adsLabel:function(){return Object(_.c)(this.filters.productLine)},trendTitle:function(){return"sale"===this.trendDialog.mode?(this.trendDialog.saleName||"销售")+"业绩趋势":this.trendDialog.companyName||"客户趋势"},filteredCompanies:function(){return this.applyRiskFilter(this.companies)},pagedCompanies:function(){return this.getPagedData(this.filteredCompanies,this.pagination.companies)},filteredAdvertisers:function(){return this.applyRiskFilter(this.advertisers)},pagedAdvertisers:function(){return this.getPagedData(this.filteredAdvertisers,this.pagination.advertisers)},pagedSales:function(){return this.getPagedData(this.sales,this.pagination.sales)},pagedCustomerDialogList:function(){return this.getPagedData(this.customerDialog.list,this.customerDialogPagination)},selectedSaleLabel:function(){var e=this,t=(this.sales||[]).find(function(t){return t.saleUserId===e.selectedSaleUserId});return t&&(t.saleName||t.crmRealname)||""},selectedCompanyLabel:function(){var e=this,t=(this.companies||[]).find(function(t){return t.advCompanyId===e.selectedAdvCompanyId});return t&&t.advCompanyName||""},currentUserId:function(){var e=this.$store.getters.userInfo;return e&&(e.userId||e.user_id||e.id)},aggregatedOverview:function(){var e=this;if(!this.sales||0===this.sales.length)return this.overview||{};var t=function(t){return e.sales.reduce(function(e,a){return e+Number(a[t]||0)},0)};return f()({},this.overview||{},{totalCost:t("totalCost"),prevTotalCost:this.overview.prevTotalCost,totalCompanyCount:t("companyCount"),totalAdvertiserCount:t("advertiserCount")})},lineOverviewList:function(){return[{key:"AD",label:"AD",current:this.lineOverviews.AD.totalCost,previous:this.lineOverviews.AD.prevTotalCost},{key:"LOCAL",label:"本地推",current:this.lineOverviews.LOCAL.totalCost,previous:this.lineOverviews.LOCAL.prevTotalCost},{key:"QIANCHUAN",label:"千川",current:this.lineOverviews.QIANCHUAN.totalCost,previous:this.lineOverviews.QIANCHUAN.prevTotalCost}]}},created:function(){var e=this;return m()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isAdminUser||(e.filters.onlySelf=!0),t.next=3,e.loadAllowedSaleUsers();case 3:e.handleFilterChange();case 4:case"end":return t.stop()}},t,e)}))()},mounted:function(){window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.teardownChart(),window.removeEventListener("resize",this.handleResize)},methods:{navigateToCustomers:function(){var e={window:this.effectiveWindow,productLine:this.filters.productLine};this.selectedSaleUserId&&(e.saleUserId=this.selectedSaleUserId),this.filters.riskLevel&&"ALL"!==this.filters.riskLevel&&(e.riskLevel=this.filters.riskLevel),this.$router.push({path:"/oceanengine/customers",query:e})},handleCustomWindowChange:function(){(!this.filters.customWindow||this.filters.customWindow<1)&&(this.filters.customWindow=7),this.handleFilterChange()},handleRiskChange:function(){var e=this;this.pagination.companies.currentPage=1,this.pagination.advertisers.currentPage=1;var t=this.filteredCompanies,a=t.find(function(t){return t.advCompanyId===e.selectedAdvCompanyId});this.selectedAdvCompanyId=a?a.advCompanyId:t[0]&&t[0].advCompanyId||null,this.loadAdvertisers()},handleFilterChange:function(){this.pagination.sales.currentPage=1,this.pagination.companies.currentPage=1,this.pagination.advertisers.currentPage=1,this.selectedSaleUserId=null,this.selectedAdvCompanyId=null,this.companies=[],this.advertisers=[],this.loadOverview(),this.loadSelfOverview(),this.loadLineOverviews(),this.loadSales(),this.trendDialog.visible&&(this.trendDialog.advCompanyId||this.trendDialog.saleUserId)&&this.loadTrend()},buildFilterParams:function(e){var t=Object(_.e)(this.filters.productLine),a={window:e||this.effectiveWindow,channel:t.channel,accountSource:t.accountSource};return this.isAdminUser?this.filters.onlySelf&&this.currentUserId&&(a.saleUserId=this.currentUserId):this.currentUserId&&(a.saleUserId=this.selectedSaleUserId||this.currentUserId),a},buildCompanyParams:function(){var e=this.buildFilterParams();return this.selectedSaleUserId&&(e.saleUserId=this.selectedSaleUserId),e},buildAdvertiserParams:function(){var e=this.buildCompanyParams();return this.selectedAdvCompanyId&&(e.advCompanyId=this.selectedAdvCompanyId),e},loadAllowedSaleUsers:function(){var e=this;return m()(v.a.mark(function t(){var a,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isAdminUser){t.next=3;break}return e.allowedSaleUserIds=null,t.abrupt("return");case 3:if(e.currentUserId){t.next=6;break}return e.allowedSaleUserIds=[],t.abrupt("return");case 6:return a=[],e.currentUserId&&a.push(Number(e.currentUserId)),t.prev=8,t.next=11,Object(C.b)(e.currentUserId);case 11:n=t.sent,(n.data||[]).forEach(function(e){return a.push(Number(e))}),t.next=18;break;case 16:t.prev=16,t.t0=t.catch(8);case 18:e.allowedSaleUserIds=c()(new l.a(a.filter(Boolean)));case 19:case"end":return t.stop()}},t,e,[[8,16]])}))()},loadOverview:function(){var e=this;return m()(v.a.mark(function t(){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.overviewLoading=!0,t.prev=1,t.next=4,Object(C.f)(e.buildFilterParams());case 4:a=t.sent,e.overview=a.data||{},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.overview={},e.$message.error("概览数据加载失败，请稍后重试");case 12:return t.prev=12,e.overviewLoading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[1,8,12,15]])}))()},loadSelfOverview:function(){var e=this;return m()(v.a.mark(function t(){var a,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentUserId){t.next=3;break}return e.selfOverview={},t.abrupt("return");case 3:return e.selfOverviewLoading=!0,t.prev=4,a=f()({window:e.effectiveWindow,saleUserId:e.currentUserId},Object(_.e)("ALL")),t.next=8,Object(C.f)(a);case 8:n=t.sent,e.selfOverview=n.data||{},t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),e.selfOverview={};case 15:return t.prev=15,e.selfOverviewLoading=!1,t.finish(15);case 18:case"end":return t.stop()}},t,e,[[4,12,15,18]])}))()},loadLineOverviews:function(){var e=this;return m()(v.a.mark(function t(){var a,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=["AD","LOCAL","QIANCHUAN"],e.lineOverviewLoading=!0,t.prev=2,t.next=5,s.a.all(a.map(function(t){return Object(C.f)(i()({window:e.effectiveWindow},Object(_.e)(t)))}));case 5:n=t.sent,a.forEach(function(t,a){e.lineOverviews[t]=n[a]&&n[a].data||{}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a.forEach(function(t){e.lineOverviews[t]={}});case 12:return t.prev=12,e.lineOverviewLoading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()},loadSales:function(){var e=this;this.salesLoading=!0,Object(C.h)(this.buildFilterParams()).then(function(t){var a=t.data||{},n=Array.isArray(a)?a:a.list||a.records||[],i=e.filterSalesByPermission(n);if((!i||0===i.length)&&e.currentUserId){var r=e.$store.getters.userInfo||{};i=[{saleUserId:e.currentUserId,saleName:r.realname||r.realName||r.username||"我",crmRealname:r.realname||r.realName||""}]}e.sales=i;var s=i.find(function(t){return t.saleUserId===e.selectedSaleUserId});e.selectedSaleUserId=s?s.saleUserId:i[0]&&i[0].saleUserId||e.currentUserId||null,e.pagination.sales.currentPage=1,e.loadCompanies()}).catch(function(){e.sales=[],e.selectedSaleUserId=e.currentUserId||null,e.companies=[],e.advertisers=[]}).finally(function(){e.salesLoading=!1})},loadCompanies:function(){var e=this;if(this.companies=[],this.advertisers=[],!this.selectedSaleUserId&&!this.filters.onlySelf){if(!this.currentUserId)return void(this.companyLoading=!1);this.selectedSaleUserId=this.currentUserId}var t=this.buildCompanyParams();this.companyLoading=!0,Object(C.c)(t).then(function(t){var a=t.data||{},n=((Array.isArray(a)?a:a.list||a.records||[])||[]).map(function(e,t){var a=e&&e.advCompanyId?String(e.advCompanyId):"unknown",n=[a,e&&(e.channelCode||e.channel)?String(e.channelCode||e.channel):"",e&&e.accountSource?String(e.accountSource):""].filter(Boolean).join("-")||a;return i()({},e,{_rowKey:n+"-"+t})});e.companies=n;var r=e.applyRiskFilter(n),s=r.find(function(t){return t.advCompanyId===e.selectedAdvCompanyId});e.selectedAdvCompanyId=s?s.advCompanyId:r[0]&&r[0].advCompanyId||null,e.pagination.companies.currentPage=1,e.pagination.advertisers.currentPage=1,e.loadAdvertisers()}).catch(function(){e.companies=[],e.selectedAdvCompanyId=null,e.advertisers=[]}).finally(function(){e.companyLoading=!1})},loadAdvertisers:function(){var e=this;if(this.advertisers=[],this.selectedAdvCompanyId){var t=this.buildAdvertiserParams();this.advertiserLoading=!0,Object(C.a)(t).then(function(t){var a=t.data||{},n=Array.isArray(a)?a:a.list||a.records||[];e.advertisers=(n||[]).map(function(e,t){var a=e&&e.advertiserId?String(e.advertiserId):"unknown",n=[a,e&&(e.channelCode||e.channel)?String(e.channelCode||e.channel):"",e&&e.accountSource?String(e.accountSource):""].filter(Boolean).join("-")||a;return i()({},e,{_rowKey:n+"-"+t})}),e.pagination.advertisers.currentPage=1}).catch(function(){e.advertisers=[]}).finally(function(){e.advertiserLoading=!1})}else this.advertiserLoading=!1},filterSalesByPermission:function(e){var t=this;if(this.isAdminUser||!this.allowedSaleUserIds||0===this.allowedSaleUserIds.length)return e||[];var a=(e||[]).filter(function(e){return t.allowedSaleUserIds.includes(e.saleUserId)});if(this.filters.onlySelf&&this.currentUserId&&(a=a.filter(function(e){return e.saleUserId===t.currentUserId})),!a.length&&this.currentUserId){var n=(e||[]).find(function(e){return e.saleUserId===t.currentUserId});if(n)a=[n];else{var i=this.$store.getters.userInfo||{};a=[{saleUserId:this.currentUserId,saleName:i.realname||i.realName||i.username||"我",crmRealname:i.realname||i.realName||""}]}}return a},handleSaleRowClick:function(e){e&&e.saleUserId&&e.saleUserId!==this.selectedSaleUserId&&(this.selectedSaleUserId=e.saleUserId,this.pagination.companies.currentPage=1,this.pagination.advertisers.currentPage=1,this.loadCompanies())},handleCompanyRowClick:function(e){e&&e.advCompanyId&&e.advCompanyId!==this.selectedAdvCompanyId&&(this.selectedAdvCompanyId=e.advCompanyId,this.pagination.advertisers.currentPage=1,this.loadAdvertisers())},saleRowClass:function(e){return e.row.saleUserId===this.selectedSaleUserId?"is-selected-row":""},companyRowClass:function(e){return e.row.advCompanyId===this.selectedAdvCompanyId?"is-selected-row":""},applyRiskFilter:function(e){var t=(this.filters.riskLevel||"ALL").toUpperCase();return"ALL"===t?e||[]:(e||[]).filter(function(e){return(e.riskLevel||"").toUpperCase()===t})},showAdsColumn:function(e){return Object(_.h)(e)},showQcColumn:function(e){return Object(_.i)(e)},adsDisplayCost:function(e,t){return Object(_.b)(e,t||this.filters.productLine)},qcDisplayCost:function(e){return Object(_.g)(e)},formatTotalByProductLine:function(e){return Object(_.j)(e,this.filters.productLine)},getPagedData:function(e,t){var a=t&&t.currentPage||1,n=t&&t.pageSize||10,i=(a-1)*n;return(e||[]).slice(i,i+n)},salesIndex:function(e){return(this.pagination.sales.currentPage-1)*this.pagination.sales.pageSize+e+1},companyIndex:function(e){return(this.pagination.companies.currentPage-1)*this.pagination.companies.pageSize+e+1},advertiserIndex:function(e){return(this.pagination.advertisers.currentPage-1)*this.pagination.advertisers.pageSize+e+1},overviewIndex:function(e){return e+1},customerDialogIndex:function(e){return(this.customerDialogPagination.currentPage-1)*this.customerDialogPagination.pageSize+e+1},handleCustomerDialogPageChange:function(e){this.customerDialogPagination.currentPage=e},openCustomerDialog:function(e,t){this.customerDialog.type=e,this.customerDialog.riskLevel=t||"",this.customerDialog.title="down"===e?"下滑客户明细":"客户健康明细",this.customerDialogPagination.currentPage=1,this.customerDialog.visible=!0,this.loadCustomerDialog()},loadCustomerDialog:function(){var e=this;return m()(v.a.mark(function t(){var a,n,r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.customerDialog.loading=!0,t.prev=1,"down"!==e.customerDialog.type){t.next=8;break}return t.next=5,Object(C.e)(e.buildFilterParams());case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,Object(C.c)(e.buildFilterParams());case 10:t.t0=t.sent;case 11:a=t.t0,n=a.data||{},r=Array.isArray(n)?n:n.list||n.records||[],"down"===e.customerDialog.type||e.customerDialog.riskLevel&&(r=r.filter(function(t){return(t.riskLevel||"").toUpperCase()===e.customerDialog.riskLevel})),e.customerDialog.list=(r||[]).map(function(e,t){var a=e&&e.advCompanyId?String(e.advCompanyId):"unknown",n=[a,e&&(e.channelCode||e.channel)?String(e.channelCode||e.channel):"",e&&e.accountSource?String(e.accountSource):""].filter(Boolean).join("-")||a;return i()({},e,{_rowKey:n+"-"+t})}),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),e.customerDialog.list=[];case 21:return t.prev=21,e.customerDialog.loading=!1,t.finish(21);case 24:case"end":return t.stop()}},t,e,[[1,18,21,24]])}))()},formatAccountSource:function(e){return{ALL:"全部来源",AD:"AD",LOCAL:"LOCAL",STAR:"STAR",LUBAN:"鲁班",DOMESTIC:"DOMESTIC",QIANCHUAN:"千川"}[e]||e||"-"},displayProductLine:function(e,t){return Object(_.d)(e,t)},formatAmount:function(e){if(null==e||""===e)return"-";var t=Number(e);return isNaN(t)?e:t.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})},formatDate:function(e){if(!e)return"-";var t=new Date(e);return isNaN(t.getTime())?"-":t.getFullYear()+"-"+(""+(t.getMonth()+1)).padStart(2,"0")+"-"+(""+t.getDate()).padStart(2,"0")},formatRange:function(e){return e&&e.windowStart&&e.windowEnd?this.formatDate(e.windowStart)+" ~ "+this.formatDate(e.windowEnd):""},formatInactive:function(e){if(null==e)return"-";var t=Number(e);return isNaN(t)?"-":t+" 天未消耗"},riskLabel:function(e){var t=(e||"").toUpperCase();return"ACTIVE"===t?"活跃":"WARN"===t?"预警":"危险"},riskTagType:function(e){var t=(e||"").toUpperCase();return"ACTIVE"===t?"success":"WARN"===t?"warning":"danger"},changeType:function(e,t){return this.calcChange(e,t).direction},formatRate:function(e,t){return this.calcChange(e,t).text},calcChange:function(e,t){var a=Number(e||0),n=Number(t||0);if(0===n)return{direction:"flat",text:"--"};var i=(a-n)/n*100;return{direction:i>0?"up":i<0?"down":"flat",text:(i>=0?"+":"")+i.toFixed(1)+"%"}},openTrend:function(e){var t=this;e&&e.advCompanyId&&(this.trendDialog.mode="company",this.trendDialog.advCompanyId=e.advCompanyId,this.trendDialog.companyName=e.advCompanyName||"客户趋势",this.trendDialog.saleUserId=null,this.trendDialog.saleName="",this.trendDialog.windowType=this.filters.windowType,this.trendDialog.customWindow=this.filters.customWindow,this.trendDialog.visible=!0,this.$nextTick(function(){t.loadTrend()}))},openSaleTrend:function(e){var t=this;e&&e.saleUserId&&(this.trendDialog.mode="sale",this.trendDialog.saleUserId=e.saleUserId,this.trendDialog.saleName=e.saleName||e.crmRealname||"销售",this.trendDialog.advCompanyId=null,this.trendDialog.companyName="",this.trendDialog.windowType=this.filters.windowType,this.trendDialog.customWindow=this.filters.customWindow,this.trendDialog.visible=!0,this.$nextTick(function(){t.loadTrend()}))},trendWindowValue:function(){var e="custom"===this.trendDialog.windowType?Number(this.trendDialog.customWindow||0):Number(this.trendDialog.windowType||30);return e>0?e:30},handleTrendWindowChange:function(){"custom"===this.trendDialog.windowType&&(!this.trendDialog.customWindow||this.trendDialog.customWindow<1)&&(this.trendDialog.customWindow=30),this.trendDialog.visible&&this.loadTrend()},loadTrend:function(){var e=this;if("sale"!==this.trendDialog.mode){if(this.trendDialog.advCompanyId){this.trendDialog.loading=!0;var t=Object(_.e)(this.filters.productLine);Object(C.d)(this.trendDialog.advCompanyId,{window:this.trendWindowValue(),channel:t.channel,accountSource:t.accountSource}).then(function(t){e.trendDialog.data=t.data||[],e.$nextTick(function(){e.renderTrendChart()})}).catch(function(){e.trendDialog.data=[],e.renderTrendChart()}).finally(function(){e.trendDialog.loading=!1})}}else this.loadSaleTrend()},loadSaleTrend:function(){var e=this;return m()(v.a.mark(function t(){var a,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.trendDialog.saleUserId){t.next=2;break}return t.abrupt("return");case 2:return e.trendDialog.loading=!0,a=Object(_.e)(e.filters.productLine),t.prev=4,t.next=7,Object(C.g)(e.trendDialog.saleUserId,{window:e.trendWindowValue(),channel:a.channel,accountSource:a.accountSource});case 7:n=t.sent,e.trendDialog.data=n.data||[],e.$nextTick(function(){e.renderTrendChart()}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),e.trendDialog.data=[],e.renderTrendChart();case 16:return t.prev=16,e.trendDialog.loading=!1,t.finish(16);case 19:case"end":return t.stop()}},t,e,[[4,12,16,19]])}))()},renderTrendChart:function(){var e=this;if(this.ensureTrendChart(),this.trendChart){var t=this.trendDialog.data||[],a=t.map(function(t){return e.formatDate(t.statDate)}),n=t.map(function(t){return Object(_.b)(t,e.filters.productLine)}),i=t.map(function(e){return Number(e.localCost||0)}),r=t.map(function(e){return Object(_.g)(e)}),s=["总消耗","本地推"],o=[{name:"总消耗",type:"line",smooth:!0,data:t.map(function(t){return Object(_.j)(t,e.filters.productLine)}),showSymbol:!1},{name:"本地推",type:"line",smooth:!0,data:i,showSymbol:!1}];this.showAdsColumn(this.filters.productLine)&&(s.push(this.adsLabel),o.push({name:this.adsLabel,type:"line",smooth:!0,data:n,showSymbol:!1})),this.showQcColumn(this.filters.productLine)&&(s.push("千川"),o.push({name:"千川",type:"line",smooth:!0,data:r,showSymbol:!1}));var l={tooltip:{trigger:"axis"},legend:{data:s},grid:{top:30,left:50,right:20,bottom:50},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value",name:"消耗(元)"},series:o};this.trendChart.setOption(l,!0),this.trendChart.resize()}},ensureTrendChart:function(){!this.trendChart&&this.$refs.trendChart&&(this.trendChart=w.a.init(this.$refs.trendChart))},handleTrendClose:function(){this.trendDialog.visible=!1,this.trendDialog.data=[],this.trendDialog.advCompanyId=null,this.trendDialog.saleUserId=null,this.trendDialog.saleName="",this.trendDialog.mode="company",this.teardownChart()},handleSalesPageChange:function(e){this.pagination.sales.currentPage=e},handleCompanyPageChange:function(e){this.pagination.companies.currentPage=e},handleAdvertiserPageChange:function(e){this.pagination.advertisers.currentPage=e},teardownChart:function(){this.trendChart&&(this.trendChart.dispose(),this.trendChart=null)},handleResize:function(){this.trendChart&&this.trendChart.resize()}}},y=(a("Edfa"),a("KHd+")),k=Object(y.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"oe-dashboard"},[a("el-card",{staticClass:"filter-card",attrs:{shadow:"never"}},[a("div",{staticClass:"filter-bar"},[a("div",{staticClass:"filter-left"},[a("el-select",{staticClass:"filter-item",attrs:{size:"small"},on:{change:e.handleFilterChange},model:{value:e.filters.windowType,callback:function(t){e.$set(e.filters,"windowType",t)},expression:"filters.windowType"}},[a("el-option",{attrs:{label:"近7天",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"近15天",value:"15"}}),e._v(" "),a("el-option",{attrs:{label:"近30天",value:"30"}}),e._v(" "),a("el-option",{attrs:{label:"自定义",value:"custom"}})],1),e._v(" "),"custom"===e.filters.windowType?a("el-input-number",{staticClass:"filter-item narrow",attrs:{min:1,max:120,step:1,size:"small"},on:{change:e.handleCustomWindowChange},model:{value:e.filters.customWindow,callback:function(t){e.$set(e.filters,"customWindow",t)},expression:"filters.customWindow"}}):e._e(),e._v(" "),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"产品线",size:"small"},on:{change:e.handleFilterChange},model:{value:e.filters.productLine,callback:function(t){e.$set(e.filters,"productLine",t)},expression:"filters.productLine"}},e._l(e.productLineOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-switch",{staticClass:"filter-item switch-item",attrs:{"active-text":"只看自己","inactive-text":"全部销售"},on:{change:e.handleFilterChange},model:{value:e.filters.onlySelf,callback:function(t){e.$set(e.filters,"onlySelf",t)},expression:"filters.onlySelf"}}),e._v(" "),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"风险筛选",size:"small"},on:{change:e.handleRiskChange},model:{value:e.filters.riskLevel,callback:function(t){e.$set(e.filters,"riskLevel",t)},expression:"filters.riskLevel"}},[a("el-option",{attrs:{label:"全部风险",value:"ALL"}}),e._v(" "),a("el-option",{attrs:{label:"活跃",value:"ACTIVE"}}),e._v(" "),a("el-option",{attrs:{label:"预警",value:"WARN"}}),e._v(" "),a("el-option",{attrs:{label:"危险",value:"DANGER"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh"},on:{click:e.handleFilterChange}},[e._v("刷新")])],1),e._v(" "),a("div",{staticClass:"filter-tip"},[e._v("\n        筛选作用于概览、下钻与趋势\n      ")])])]),e._v(" "),a("el-row",{staticClass:"kpi-row",attrs:{gutter:16}},[a("el-col",{attrs:{span:6}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.overviewLoading,expression:"overviewLoading"}],staticClass:"kpi-card",attrs:{shadow:"never"}},[a("div",{staticClass:"kpi-title"},[e._v("近 "+e._s(e.overview.windowDays||e.effectiveWindow)+" 天总消耗")]),e._v(" "),a("div",{staticClass:"kpi-value"},[e._v(e._s(e.formatAmount(e.aggregatedOverview.totalCost)))]),e._v(" "),a("div",{staticClass:"kpi-meta"},[e._v(e._s(e.formatRange(e.overview)||"数据准备中"))]),e._v(" "),a("div",{staticClass:"kpi-change",class:"is-"+e.changeType(e.aggregatedOverview.totalCost,e.aggregatedOverview.prevTotalCost)},[e._v("\n          对比上期："+e._s(e.formatRate(e.aggregatedOverview.totalCost,e.aggregatedOverview.prevTotalCost))+"\n        ")])])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.overviewLoading,expression:"overviewLoading"}],staticClass:"kpi-card",attrs:{shadow:"never"}},[a("div",{staticClass:"kpi-title"},[e._v("客户健康")]),e._v(" "),a("div",{staticClass:"risk-row"},[a("div",{staticClass:"risk-pill success"},[a("span",{staticClass:"label"},[e._v("活跃")]),e._v(" "),a("span",{staticClass:"value is-link",on:{click:function(t){t.stopPropagation(),e.openCustomerDialog("health","ACTIVE")}}},[e._v(e._s(e.overview.activeCompanyCount||0))])]),e._v(" "),a("div",{staticClass:"risk-pill warn"},[a("span",{staticClass:"label"},[e._v("预警")]),e._v(" "),a("span",{staticClass:"value is-link",on:{click:function(t){t.stopPropagation(),e.openCustomerDialog("health","WARN")}}},[e._v(e._s(e.overview.warnCompanyCount||0))])]),e._v(" "),a("div",{staticClass:"risk-pill danger"},[a("span",{staticClass:"label"},[e._v("危险")]),e._v(" "),a("span",{staticClass:"value is-link",on:{click:function(t){t.stopPropagation(),e.openCustomerDialog("health","DANGER")}}},[e._v(e._s(e.overview.dangerCompanyCount||0))])])])])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.overviewLoading,expression:"overviewLoading"}],staticClass:"kpi-card",attrs:{shadow:"never"}},[a("div",{staticClass:"kpi-title"},[e._v("客户 / 广告主数")]),e._v(" "),a("div",{staticClass:"kpi-value"},[e._v(e._s(e.aggregatedOverview.totalCompanyCount||0))]),e._v(" "),a("div",{staticClass:"kpi-meta"},[e._v("公司数")]),e._v(" "),a("div",{staticClass:"kpi-subtext"},[e._v("广告主 "+e._s(e.aggregatedOverview.totalAdvertiserCount||0))])])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.overviewLoading,expression:"overviewLoading"}],staticClass:"kpi-card",attrs:{shadow:"never"}},[a("div",{staticClass:"kpi-title"},[e._v("下滑客户")]),e._v(" "),a("div",{staticClass:"kpi-value is-link",on:{click:function(t){t.stopPropagation(),e.openCustomerDialog("down")}}},[e._v(e._s(e.overview.downCompanyCount||0))]),e._v(" "),a("div",{staticClass:"kpi-subtext"},[e._v("近 "+e._s(e.overview.windowDays||e.effectiveWindow)+" 天消耗下滑超过 10% 的客户数")])])],1)],1),e._v(" "),a("el-row",{staticClass:"kpi-row",attrs:{gutter:16}},[a("el-col",{attrs:{span:8}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.selfOverviewLoading,expression:"selfOverviewLoading"}],staticClass:"kpi-card",attrs:{shadow:"never"}},[a("div",{staticClass:"kpi-title"},[e._v("我的消耗（全部产品线）")]),e._v(" "),a("div",{staticClass:"kpi-value"},[e._v(e._s(e.formatAmount(e.selfOverview.totalCost)))]),e._v(" "),a("div",{staticClass:"kpi-meta"},[e._v("AD："+e._s(e.formatAmount(e.adsDisplayCost(e.selfOverview,"ALL")))+" · 千川："+e._s(e.formatAmount(e.qcDisplayCost(e.selfOverview))))]),e._v(" "),a("div",{class:"kpi-change is-"+e.changeType(e.selfOverview.totalCost,e.selfOverview.prevTotalCost)},[e._v("\n          环比："+e._s(e.formatRate(e.selfOverview.totalCost,e.selfOverview.prevTotalCost))+"\n        ")]),e._v(" "),a("div",{staticClass:"kpi-subtext yoy-text"},[a("el-tooltip",{attrs:{content:"接口暂未提供同比口径",placement:"top"}},[a("span",[e._v("同比：--")])])],1)])],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.lineOverviewLoading,expression:"lineOverviewLoading"}],staticClass:"kpi-card",attrs:{shadow:"never"}},[a("div",{staticClass:"kpi-title"},[e._v("账户级别（按产品线）环比")]),e._v(" "),a("el-table",{staticClass:"overview-table",attrs:{data:e.lineOverviewList,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.overviewIndex}}),e._v(" "),a("el-table-column",{attrs:{prop:"label",label:"产品线",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"本期消耗","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.current)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上期消耗","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.previous)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"环比",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatRate(t.row.current,t.row.previous)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"同比",width:"110"}},[[a("el-tooltip",{attrs:{content:"接口暂未提供同比口径",placement:"top"}},[a("span",{staticClass:"yoy-text"},[e._v("--")])])]],2)],1)],1)],1)],1),e._v(" "),a("el-card",{staticClass:"drill-card",attrs:{shadow:"never"}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("div",[a("span",[e._v("销售 → 公司 → 广告主")]),e._v(" "),a("span",{staticClass:"header-ctx"},[e._v("（"+e._s(e.windowLabel)+" · "+e._s(e.productLineLabel)+"）")])]),e._v(" "),a("div",{staticClass:"actions"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.navigateToCustomers}},[e._v("客户列表")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-refresh"},on:{click:e.handleFilterChange}},[e._v("刷新")])],1)]),e._v(" "),a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"table-title"},[e._v("销售")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.salesLoading,expression:"salesLoading"}],attrs:{data:e.pagedSales,"row-key":"saleUserId","row-class-name":e.saleRowClass,border:"",size:"mini","highlight-current-row":""},on:{"row-click":e.handleSaleRowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.salesIndex}}),e._v(" "),a("el-table-column",{attrs:{label:"销售","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-text"},[e._v(e._s(t.row.saleName||"-"))]),e._v(" "),a("div",{staticClass:"sub-text"},[e._v(e._s(t.row.crmRealname||""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"companyCount",label:"公司",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"advertiserCount",label:"广告主",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"AD",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.adsCost)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本地推",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.localCost)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"千川",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.qcCost)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总消耗",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.totalCost)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"业绩趋势",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){a.stopPropagation(),e.openSaleTrend(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("div",{staticClass:"table-footer"},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.pagination.sales.currentPage,"page-size":e.pagination.sales.pageSize,total:e.sales.length},on:{"update:currentPage":function(t){e.$set(e.pagination.sales,"currentPage",t)},"current-change":e.handleSalesPageChange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"table-title"},[e._v("\n          公司\n          "),e.selectedSaleLabel?a("span",{staticClass:"header-ctx"},[e._v("（销售："+e._s(e.selectedSaleLabel)+"）")]):e._e()]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.companyLoading,expression:"companyLoading"}],attrs:{data:e.pagedCompanies,"row-key":"_rowKey","row-class-name":e.companyRowClass,border:"",size:"mini","highlight-current-row":""},on:{"row-click":e.handleCompanyRowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.companyIndex}}),e._v(" "),a("el-table-column",{attrs:{prop:"advCompanyName",label:"公司","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ownerName",label:"客户归属","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ownerName||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品线",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.displayProductLine(t.row.channelCode||t.row.channel,t.row.accountSource)))]}}])}),e._v(" "),e.showAdsColumn(e.filters.productLine)?a("el-table-column",{attrs:{label:e.adsLabel,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.adsDisplayCost(t.row,e.filters.productLine))))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"本地推",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.localCost)))]}}])}),e._v(" "),e.showQcColumn(e.filters.productLine)?a("el-table-column",{attrs:{label:"千川消耗",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.qcDisplayCost(t.row))))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"总消耗",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.formatTotalByProductLine(t.row))))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最近消耗",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatDate(t.row.lastCostDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"不活跃天数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatInactive(t.row.inactiveDays)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"风险",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.riskTagType(t.row.riskLevel),size:"mini"}},[e._v("\n                "+e._s(e.riskLabel(t.row.riskLevel))+"\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"趋势",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){a.stopPropagation(),e.openTrend(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("div",{staticClass:"table-footer"},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.pagination.companies.currentPage,"page-size":e.pagination.companies.pageSize,total:e.filteredCompanies.length},on:{"update:currentPage":function(t){e.$set(e.pagination.companies,"currentPage",t)},"current-change":e.handleCompanyPageChange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"table-title"},[e._v("\n          广告主\n          "),e.selectedCompanyLabel?a("span",{staticClass:"header-ctx"},[e._v("（公司："+e._s(e.selectedCompanyLabel)+"）")]):e._e()]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.advertiserLoading,expression:"advertiserLoading"}],attrs:{data:e.pagedAdvertisers,"row-key":"_rowKey",border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.advertiserIndex}}),e._v(" "),a("el-table-column",{attrs:{prop:"advertiserName",label:"广告主","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"产品线",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.displayProductLine(t.row.channelCode||t.row.channel,t.row.accountSource)))]}}])}),e._v(" "),e.showAdsColumn(e.filters.productLine)?a("el-table-column",{attrs:{label:e.adsLabel,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.adsDisplayCost(t.row,e.filters.productLine))))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"本地推",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.localCost)))]}}])}),e._v(" "),e.showQcColumn(e.filters.productLine)?a("el-table-column",{attrs:{label:"千川消耗",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.qcDisplayCost(t.row))))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"总消耗",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.formatTotalByProductLine(t.row))))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最近消耗",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatDate(t.row.lastCostDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"不活跃天数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatInactive(t.row.inactiveDays)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"风险",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.riskTagType(t.row.riskLevel),size:"mini"}},[e._v("\n                "+e._s(e.riskLabel(t.row.riskLevel))+"\n              ")])]}}])})],1),e._v(" "),a("div",{staticClass:"table-footer"},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.pagination.advertisers.currentPage,"page-size":e.pagination.advertisers.pageSize,total:e.filteredAdvertisers.length},on:{"update:currentPage":function(t){e.$set(e.pagination.advertisers,"currentPage",t)},"current-change":e.handleAdvertiserPageChange}})],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.customerDialog.visible,"close-on-click-modal":!1,width:"980px"},on:{"update:visible":function(t){e.$set(e.customerDialog,"visible",t)}}},[a("div",{staticClass:"trend-title",attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.customerDialog.title)+"\n      "),a("span",{staticClass:"header-ctx"},[e._v("（"+e._s(e.windowLabel)+" · "+e._s(e.productLineLabel)+"）")])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.customerDialog.loading,expression:"customerDialog.loading"}],attrs:{data:e.pagedCustomerDialogList,"row-key":"_rowKey",border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.customerDialogIndex}}),e._v(" "),a("el-table-column",{attrs:{prop:"advCompanyName",label:"公司","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleName",label:"所属销售","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.saleName||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品线",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.displayProductLine(t.row.channelCode||t.row.channel,t.row.accountSource)))]}}])}),e._v(" "),e.showAdsColumn(e.filters.productLine)?a("el-table-column",{attrs:{label:e.adsLabel,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.adsDisplayCost(t.row,e.filters.productLine))))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"本地推",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(t.row.localCost)))]}}])}),e._v(" "),e.showQcColumn(e.filters.productLine)?a("el-table-column",{attrs:{label:"千川消耗",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.qcDisplayCost(t.row))))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"总消耗",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatAmount(e.formatTotalByProductLine(t.row))))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最近消耗",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatDate(t.row.lastCostDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"不活跃天数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatInactive(t.row.inactiveDays)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"风险",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.riskTagType(t.row.riskLevel),size:"mini"}},[e._v("\n            "+e._s(e.riskLabel(t.row.riskLevel))+"\n          ")])]}}])})],1),e._v(" "),a("div",{staticClass:"table-footer"},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.customerDialogPagination.currentPage,"page-size":e.customerDialogPagination.pageSize,total:e.customerDialog.list.length},on:{"update:currentPage":function(t){e.$set(e.customerDialogPagination,"currentPage",t)},"current-change":e.handleCustomerDialogPageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.trendDialog.visible,"close-on-click-modal":!1,width:"900px"},on:{"update:visible":function(t){e.$set(e.trendDialog,"visible",t)},close:e.handleTrendClose}},[a("div",{staticClass:"trend-title",attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.trendTitle)+"\n      "),a("span",{staticClass:"header-ctx"},[e._v("（"+e._s(e.productLineLabel)+"）")])]),e._v(" "),a("div",{staticClass:"trend-toolbar"},[a("el-radio-group",{attrs:{size:"mini"},on:{change:e.handleTrendWindowChange},model:{value:e.trendDialog.windowType,callback:function(t){e.$set(e.trendDialog,"windowType",t)},expression:"trendDialog.windowType"}},[a("el-radio-button",{attrs:{label:"7"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"15"}},[e._v("近15天")]),e._v(" "),a("el-radio-button",{attrs:{label:"30"}},[e._v("近30天")]),e._v(" "),a("el-radio-button",{attrs:{label:"custom"}},[e._v("自定义")])],1),e._v(" "),"custom"===e.trendDialog.windowType?a("el-input-number",{staticClass:"filter-item narrow",attrs:{min:1,max:180,size:"small"},on:{change:e.handleTrendWindowChange},model:{value:e.trendDialog.customWindow,callback:function(t){e.$set(e.trendDialog,"customWindow",t)},expression:"trendDialog.customWindow"}}):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-refresh"},on:{click:e.loadTrend}},[e._v("刷新趋势")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.trendDialog.loading,expression:"trendDialog.loading"}],ref:"trendChart",staticClass:"trend-chart"}),e._v(" "),e.trendDialog.loading||e.trendDialog.data&&0!==e.trendDialog.data.length?e._e():a("el-empty",{staticClass:"trend-empty",attrs:{"image-size":80,description:"该时间段内无消耗"}})],1)],1)},[],!1,null,"516c1422",null);k.options.__file="SalesDashboard.vue";t.default=k.exports},CmFV:function(e,t,a){},Edfa:function(e,t,a){"use strict";var n=a("CmFV");a.n(n).a}}]);