(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-301c"],{"+66p":function(e,t,i){"use strict";var a=i("mTwS");i.n(a).a},"0ezy":function(e,t,i){},"2ENh":function(e,t,i){},"8vKi":function(e,t,i){"use strict";var a=i("Rlkq");i.n(a).a},A8zB:function(e,t,i){},Ah8l:function(e,t,i){},CUKw:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmActionRecord/queryRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},El9w:function(e,t,i){"use strict";var a=i("Ah8l");i.n(a).a},"GpE+":function(e,t,i){"use strict";var a=i("Mffw");i.n(a).a},ImzK:function(e,t,i){},Jbo4:function(e,t,i){"use strict";var a={name:"WkBorderMenu",components:{},props:{list:Array,value:[String,Number],isSelect:{type:Boolean,default:!1}},data:function(){return{tabType:""}},computed:{},watch:{value:{handler:function(e){this.tabType=e},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{tabClick:function(e,t){this.$emit("input",e.name),this.$emit("select",e,t)}}},n=(i("fUY0"),i("KHd+")),s=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"wk-border-menu",class:{"is-select":e.isSelect}},e._l(e.list,function(t,a){return i("div",{key:a,staticClass:"wk-border-menu__item",class:{"is-select":e.tabType==t.name},on:{click:function(i){e.tabClick(t,a)}}},[i("div",{staticClass:"label"},[e._v(e._s(t.label))]),e._v(" "),i("div",{staticClass:"num"},[e._v(e._s(t.num))])])}))},[],!1,null,"8dc40426",null);s.options.__file="index.vue";t.a=s.exports},Mffw:function(e,t,i){},NEL7:function(e,t,i){"use strict";var a=i("nBZM");i.n(a).a},P5Fn:function(e,t,i){"use strict";var a=i("StgO"),n=i("oF75"),s=i("Gqw/"),o=i("gVZb"),r=i("UGe0"),l=i("EP+0"),d=i("bxH2"),c=i("7Qib"),u=i("BzB7"),m={name:"CandidateCreateView",components:{XrCreate:o.a,CreateSections:l.a,WkForm:r.a},filters:{},mixins:[u.a],props:{detail:Object},data:function(){return{loading:!1,baseFields:d.a.fields,baseRules:{},baseForm:{},channelList:[],postList:[]}},computed:{titleContent:function(){return this.detail?"编辑候选人":"新建候选人"}},watch:{},created:function(){var e=this;this.getChannelList(),this.getPostList();var t={};if(d.a.fields.forEach(function(i){t[i.field]=e.getRules(i)}),this.baseRules=t,this.detail){var i=Object(c.v)(this.detail),a={};this.baseFields.forEach(function(e){"postId"==e.field&&0==i.postStatus&&(i.postId=""),a[e.field]=i[e.field]}),this.baseForm=a}else this.baseForm={sex:1}},mounted:function(){},beforeDestroy:function(){},methods:{getChannelList:function(){var e=this;Object(s.f)().then(function(t){var i=t.data||[];i.forEach(function(e){1==e.status&&(e.label=e.value,e.value=e.channelId)}),e.channelList=i}).catch(function(){})},getPostList:function(){var e=this;Object(n.b)().then(function(t){e.postList=t.data||[]}).catch(function(){})},close:function(){this.$emit("close")},saveClick:function(){var e=this;this.$refs.baseForm.$children[0].validate(function(t){t&&e.uploadCreateData()})},uploadCreateData:function(){var e=this,t=Object(c.v)(this.baseForm);this.detail&&(t.candidateId=this.detail.candidateId),this.loading=!0,(this.detail?a.i:a.a)(t).then(function(t){e.$emit("close"),e.$message.success(e.titleContent+"成功"),e.$emit("success"),e.loading=!1}).catch(function(){e.loading=!1})},postSetClick:function(){this.$router.push({name:"hrmPost"})}}},h=(i("w9wx"),i("KHd+")),f=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("xr-create",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.titleContent},on:{close:e.close,save:e.saveClick}},[i("create-sections",{attrs:{title:"基本信息"}},[i("wk-form",{ref:"baseForm",attrs:{model:e.baseForm,rules:e.baseRules,"field-from":e.baseForm,"field-list":e.baseFields,"label-position":"top"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[a&&"post"==a.formType?i("el-select",{staticStyle:{width:"100%"},model:{value:e.baseForm[a.field],callback:function(t){e.$set(e.baseForm,a.field,t)},expression:"baseForm[data.field]"}},[e._l(e.postList,function(t,a){return i("el-option",{key:a,attrs:{label:t.postName,value:t.postId}},[e._v("\n            "+e._s(t.postName)),i("span",{staticStyle:{color:"#999"}},[e._v(e._s(t.deptName?"("+t.deptName+")":""))])])}),e._v(" "),i("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[i("span",[e._v("暂无可选职位。")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.postSetClick}},[e._v("前去设置")])],1)],2):e._e(),e._v(" "),a&&"channel"==a.formType?i("el-select",{staticStyle:{width:"100%"},model:{value:e.baseForm[a.field],callback:function(t){e.$set(e.baseForm,a.field,t)},expression:"baseForm[data.field]"}},e._l(e.channelList,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})):e._e()]}}])})],1)],1)},[],!1,null,"0e7de234",null);f.options.__file="Create.vue";t.a=f.exports},PwLV:function(e,t,i){"use strict";var a={name:"WkFileSelect",components:{},props:{name:{type:String,default:"file"},disabled:Boolean,multiple:Boolean,accept:{type:String,default:"*.*"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleChange:function(e){var t=e.target.files;t&&this.$emit("change",t,e)},handleClick:function(){var e=this;this.disabled||this.$wkFile.select({name:this.name,multiple:this.multiple,accept:this.accept}).then(function(t){e.handleChange(t)})}}},n=(i("El9w"),i("KHd+")),s=Object(n.a)(a,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"wk-file-select",on:{click:this.handleClick}},[this._t("default")],2)},[],!1,null,"b95eaae0",null);s.options.__file="index.vue";t.a=s.exports},Rlkq:function(e,t,i){},St7U:function(e,t,i){"use strict";i.r(t);var a=i("4d7F"),n=i.n(a),s=i("GQeE"),o=i.n(s),r=i("QbLZ"),l=i.n(r),d=i("StgO"),c=i("zMw6"),u=i("cHj4"),m=i("oF75"),h=i("Gqw/"),f=i("9GgJ"),p=i("jpO5"),v=i("kBEL"),b=i("P5Fn"),g=i("tvUL"),w=i("UGe0"),y=i("Woz+"),C=i("7Qib"),_=i("nboU"),T={name:"FormAddDialog",components:{WkForm:w.a,VDistpicker:y.a},mixins:[_.a],props:{title:String,form:Object,rules:Object,fields:Array,visible:{type:Boolean,required:!0,default:!1},width:{type:String,default:"700px"}},data:function(){return{loading:!1,editForm:{}}},computed:{},watch:{visible:{handler:function(e){var t=this;e&&this.$nextTick(function(){t.$refs.formAddForm&&t.$refs.formAddForm.$children[0].clearValidate()})},immediate:!0},form:{handler:function(e){this.editForm=Object(C.v)(this.form||{})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$refs.formAddForm&&(this.$refs.formAddForm.$children[0].clearValidate(),this.$refs.formAddForm.$children[0].resetFields()),this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.$refs.formAddForm.$children[0].validate(function(t){t&&(e.$emit("update:form",e.editForm),e.$emit("pass"))})},wkFormChange:function(e,t,i,a){this.$emit("change",e,t,i,a,this.editForm)},selectProvince:function(e,t){this.editForm[t.field].province=e.value},selectCity:function(e,t){this.editForm[t.field].city=e.value}}},k=(i("z047"),i("KHd+")),F=Object(k.a)(T,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:e.width},on:{close:e.handleCancel}},[i("div",{staticClass:"form-add-dialog-body"},[e._t("top"),e._v(" "),i("wk-form",{ref:"formAddForm",class:1==e.fields.length?"is-vertical-dialog":"is-dialog",attrs:{model:e.editForm,rules:e.rules,"field-from":e.editForm,"field-list":e.fields,"validate-on-rule-change":!1,"label-position":"top"},on:{change:e.wkFormChange},scopedSlots:e._u([{key:"default",fn:function(t){return[t.data&&"city"==t.data.formType?i("v-distpicker",{attrs:{province:e.editForm[t.data.field].province,city:e.editForm[t.data.field].city,"hide-area":""},on:{province:function(i){e.selectProvince(i,t.data)},city:function(i){e.selectCity(i,t.data)}}}):e._e()]}}])}),e._v(" "),e._t("default")],2),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1)])},[],!1,null,"4d75cca1",null);F.options.__file="FormAddDialog.vue";var j=F.exports,x=i("5RCQ"),A=i("Jbo4"),O=i("L2JU"),L=i("bxH2"),S=i("a/5N"),I={name:"CandidateIndex",components:{XrHeader:f.a,XrTableHeader:p.a,WkPopoverFilter:v.a,CandidateCreateView:b.a,CandidateDetail:g.a,FormAddDialog:j,EmployeeCreateView:x.a,WkBorderMenu:A.a},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-275,list:[],fieldList:[],handleObj:{firstPass:{label:"移动到初选通过",command:"firstPass",icon:"wk wk-delete"},interview:{label:"安排面试",command:"interview",icon:"wk wk-delete"},pass:{label:"移动到面试通过",command:"pass",icon:"wk wk-delete"},wait:{label:"移动到待入职/入职",command:"wait",icon:"wk wk-delete"},new:{label:"移动到新候选人",command:"new",icon:"wk wk-delete"},offer:{label:"发offer",command:"offer",icon:"wk wk-delete"},again:{label:"安排复试",command:"again",icon:"wk wk-delete"},confirm:{label:"移动到入职",command:"confirm",icon:"wk wk-delete"}},currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,search:"",queryParams:{},popoverFilterWidth:150,tabType:"all",tabList:[{label:"全部",name:"all",num:0}],rowID:"",showDview:!1,channelList:[],postList:[],filterObj:{},selectionList:[],handleRowData:null,isCreate:!1,waitCreateShow:!1,formAddTitle:"",formAddCommand:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,clearTips:"",clearList:[],eliminateList:[]}},provide:function(){return{manageAuth:this.manageAuth}},computed:l()({},Object(O.b)(["collapse","hrm"]),{recruitAuth:function(){return this.hrm.recruit},createAuth:function(){return this.recruitAuth&&this.recruitAuth.save},detailAuth:function(){return this.recruitAuth&&this.recruitAuth.read},manageAuth:function(){return this.recruitAuth&&this.recruitAuth.manage},deleteAuth:function(){return this.recruitAuth&&this.recruitAuth.delete},tabelHandles:function(){if(this.manageAuth){if(1==this.tabType||2==this.tabType||3==this.tabType||4==this.tabType||5==this.tabType||6==this.tabType)return[{label:"淘汰/流失",command:"eliminate",icon:"wk wk-delete"}];if(7==this.tabType)return[{label:"恢复到新候选人",command:"reset",icon:"wk wk-reset"}]}return[]},hasFilterContent:function(){if(this.filterObj){for(var e=!1,t=o()(this.filterObj),i=0;i<t.length;i++){var a=t[i];""!=this.filterObj[a]&&this.filterObj[a]!=[]&&null!=this.filterObj[a]&&null!=this.filterObj[a]&&(e=!0)}return e}return!1},filterList:function(){return[{name:"职位",field:"postId",formType:"select",setting:this.postList},{name:"招聘负责人",field:"ownerEmployeeId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:u.i,setting:[]},{name:"性别",field:"sex",formType:"radio",setting:[{label:"男",value:1},{label:"女",value:2}]},{name:"年龄",field:"age",formType:"range",setting:[]},{name:"工作年限",field:"workTime",formType:"range",setting:[]},{name:"学历",field:"education",formType:"select",setting:L.a.getValueList(L.a.educationValue)},{name:"毕业院校",field:"graduateSchool",formType:"text",setting:[]},{name:"最近工作单位",field:"latestWorkPlace",formType:"text",setting:[]},{name:"招聘渠道",field:"channelId",formType:"select",setting:this.channelList},{name:"面试官",field:"interviewEmployeeId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:u.i,setting:[]},{name:"面试时间",field:"interviewTime",formType:"dateRange",setting:[]},{name:"创建人",field:"createUserId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:u.i,setting:[]},{name:"创建时间",field:"createTime",formType:"dateRange",setting:[]}]},noHandles:function(){return"all"==this.tabType||!this.manageAuth&&!this.deleteAuth},statusChangeHandles:function(){if(this.noHandles||!this.manageAuth)return[];var e=[];1==this.tabType?e=["firstPass","interview","pass"]:2==this.tabType?e=["interview","new","pass"]:3==this.tabType?e=["pass","new","firstPass"]:4==this.tabType?e=["offer","new","firstPass","again"]:5==this.tabType?e=[]:6==this.tabType&&1==this.selectionList.length&&(e=["confirm"]),1!=this.tabType&&2!=this.tabType&&4!=this.tabType&&5!=this.tabType||1!=this.selectionList.length||e.push("wait");for(var t=[],i=0;i<e.length;i++){var a=e[i];t.push(this.handleObj[a])}return t},moreHandles:function(){if(this.noHandles)return[];if(1==this.tabType||2==this.tabType||3==this.tabType||4==this.tabType){var e=this.manageAuth?[{label:"更改应聘职位",command:"changePost",icon:"wk wk-delete"},{label:"更改应聘渠道",command:"changeChannel",icon:"wk wk-delete"},{label:"一键清理候选人",command:"clear",icon:"wk wk-delete"}]:[];if(3==this.tabType&&1==this.selectionList.length)e.unshift({label:"更改面试安排",command:"changeInterview",icon:"wk wk-delete"}),4!=this.selectionList[0].interviewResult&&e.unshift({label:"取消面试",command:"cancelInterview",icon:"wk wk-delete"});return this.deleteAuth&&e.push({label:"删除",command:"delete",icon:"wk wk-delete"}),e}return 7==this.tabType&&this.deleteAuth?[{label:"删除",command:"delete",icon:"wk wk-delete"}]:[]}}),watch:{collapse:{handler:function(e){this.popoverFilterWidth=document.documentElement.clientWidth-(e?89:225)},immediate:!0}},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-(e.selectionList.length>0?325:275)};var t=L.a.getValueList(L.a.statusValue),i=[];if(t.forEach(function(e){i.push({label:e.label,name:e.value.toString(),num:0})}),this.tabList=this.tabList.concat(i),"filter"==this.$route.query.workbench){var a=this.$route.query;a&&a.tabType?this.tabType=a.tabType:(this.tabType="",this.queryParams=a,delete this.queryParams.workbench)}this.fieldList=L.a.tableFields,this.refreshList()},methods:{getTabsNum:function(){var e=this;Object(d.h)().then(function(t){var i=t.data||{},a=0;e.tabList.forEach(function(e){"all"!=e.name&&(e.num=i[parseInt(e.name)]||0,a+=e.num)}),e.tabList[0].num=a}).catch(function(){})},resetFilter:function(){this.filterObj={},this.refreshList()},createClick:function(){this.handleRowData=null,this.isCreate=!0},createSaveSuccess:function(){this.refreshList()},searchClick:function(e){this.search=e,this.refreshList()},detailHandle:function(e){"delete"===e.type&&(this.showDview=!1),this.refreshList()},tabClick:function(e){this.queryParams={},this.refreshList()},refreshList:function(){this.getTabsNum(),this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t={page:this.currentPage,limit:this.pageSize,search:this.search};for(var i in"all"!=this.tabType&&(t.status=this.tabType),this.filterObj)"age"==i?(t.minAge=this.filterObj.age[0],t.maxAge=this.filterObj.age[1]):"workTime"==i?(t.minWorkTime=this.filterObj.workTime[0],t.maxWorkTime=this.filterObj.workTime[1]):t[i]=this.filterObj[i];for(var i in this.queryParams)t[i]=this.queryParams[i];Object(d.g)(t).then(function(t){e.list=t.data.list,e.total=t.data.totalRow,e.loading=!1}).catch(function(){e.loading=!1})},fieldFormatter:function(e,t){var i=L.a[t.property+"Value"];if(i)return"status"===t.property&&3===e[t.property]&&1!=e.interviewResult?i[e[t.property]]+"（"+L.a.interviewResultValue[e.interviewResult]+"）":i[e[t.property]]||"--";if("postId"==t.property)return(e.postName||"")+(0===e.postStatus?"（已停止招聘）":"")||"--";if("channelId"==t.property)return e.channelName||"--";var a=e[t.property];return Object(S.b)(a)?"--":a},getStatusStyle:function(e){return{backgroundColor:L.a.statusColorValue[e]}},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return this.detailAuth&&"candidateName"==t.property?"can-visit--underline":""},handleRowClick:function(e,t,i){this.detailAuth&&"candidateName"==t.property&&(this.rowID=e.candidateId,this.showDview=!0)},handleSelectionChange:function(e){this.selectionList=e,this.tableHeight=document.documentElement.clientHeight-(this.selectionList.length>0?325:275)},handleCommand:function(e){var t=this;this.formAddCommand=e,"reset"==e?this.$confirm("确定恢复为新候选人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.updateStatus(L.a.statusKeyValue.new)}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):"eliminate"==e&&(this.formAddTitle="淘汰/流失候选人",this.formAddForm={eliminate:""},this.formAddRules={eliminate:[{required:!0,message:"请选择",trigger:["blur","change"]}]},this.getEliminateList().then(function(){t.formAddFields=[{name:"淘汰/流失原因",field:"eliminate",formType:"select",setting:t.eliminateList},{name:"备注",field:"remarks",formType:"textarea",setting:[]}],t.formAddDialogShow=!0}))},filterShowClick:function(){0!=this.postList.length&&0!=this.channelList.length||(this.getChannelList(),this.getPostList())},getChannelList:function(){var e=this;return new n.a(function(t,i){0==e.channelList.length?Object(h.f)().then(function(i){var a=i.data||[];a.forEach(function(e){1==e.status&&(e.label=e.value,e.value=e.channelId)}),e.channelList=a,t(e.channelList)}).catch(function(){i&&i()}):t(e.channelList)})},getPostList:function(){var e=this;return new n.a(function(t,i){0==e.postList.length?Object(m.b)().then(function(i){var a=i.data||[];a.forEach(function(e){e.label=e.postName,e.value=e.postId}),e.postList=a,t(e.postList)}).catch(function(){i&&i()}):t(e.postList)})},getEliminateList:function(){var e=this;return new n.a(function(t,i){0==e.eliminateList.length?Object(c.k)().then(function(i){var a=i.data||[];a.forEach(function(e){return{label:e,value:e}}),e.eliminateList=a,t(e.eliminateList)}).catch(function(){i&&i()}):t(e.eliminateList)})},statusHandleChange:function(e){var t=this;if(this.formAddCommand=e,"firstPass"==e||"pass"==e||"offer"==e||"new"==e)this.updateStatus(L.a.statusKeyValue[e]);else if("interview"==e||"again"==e||"changeInterview"==e){this.formAddTitle={interview:"安排面试",again:"安排复试",changeInterview:"更改面试安排"}[e];var i="changeInterview"==e?this.selectionList[0]:null;this.formAddForm={interviewEmployeeId:i?i.interviewEmployeeId:"",otherInterviewEmployeeIds:i&&i.otherInterviewEmployeeIds?i.otherInterviewEmployeeIds.split(",").filter(function(e){return!Object(S.b)(e)}).map(function(e){return parseInt(e)}):[],interviewTime:i?i.interviewTime:"",type:i?i.interviewType:""},this.formAddRules={interviewTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]},this.getChannelList().then(function(){t.formAddFields=[{name:"面试官",field:"interviewEmployeeId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:u.G,setting:[]},{name:"其他面试官",field:"otherInterviewEmployeeIds",formType:"user",radio:!1,props:{label:"employeeName",value:"employeeId"},request:u.G,setting:[]},{name:"面试时间",field:"interviewTime",formType:"datetime",setting:[]},{name:"面试方式",field:"type",formType:"select",setting:L.a.getValueList(L.a.interviewTypeValue)}],t.formAddDialogShow=!0})}else if("wait"==e)this.selectionList.length&&(this.handleRowData=this.selectionList[0],this.waitCreateShow=!0);else if("confirm"==e&&this.selectionList.length){var a=this.selectionList[0];Object(u.D)(a.employeeId).then(function(e){var i=e.data||{};i.entryTime=Object(C.A)(i.entryTime),t.handleRowData=i,t.waitCreateShow=!0}).catch(function(){})}},moreHandlesChange:function(e){var t=this;if(this.formAddCommand=e,"delete"==e)this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.b)(t.selectionList.map(function(e){return e.candidateId})).then(function(e){t.$message.success("操作成功"),t.refreshList(),t.selectionList=[]})}).catch(function(){t.$message({type:"info",message:"已取消删除"})});else if("changeChannel"==e)this.formAddTitle="更改招聘渠道",this.formAddForm={channelId:""},this.formAddRules={channelId:[{required:!0,message:"请选择",trigger:["blur","change"]}]},this.getChannelList().then(function(){t.formAddFields=[{name:"招聘渠道",field:"channelId",formType:"select",setting:t.channelList}],t.formAddDialogShow=!0});else if("changePost"==e)this.formAddTitle="更改应聘职位",this.formAddForm={postId:""},this.formAddRules={postId:[{required:!0,message:"请选择",trigger:["blur","change"]}]},this.getPostList().then(function(){t.formAddFields=[{name:"职位",field:"postId",formType:"select",setting:t.postList}],t.formAddDialogShow=!0});else if("clear"==e)this.clearTips="",this.formAddTitle="一键清理候选人",this.formAddForm={status:[],day:3},this.formAddRules={status:[{required:!0,message:"请选择",trigger:["blur","change"]}],day:[{required:!0,message:"请选择",trigger:["blur","change"]}]},this.getPostList().then(function(){t.formAddFields=[{name:"清理的候选人状态",field:"status",formType:"checkbox",setting:[{label:"新候选人",value:L.a.statusKeyValue.new},{label:"初选通过",value:L.a.statusKeyValue.firstPass},{label:"安排面试",value:L.a.statusKeyValue.interview},{label:"面试通过",value:L.a.statusKeyValue.pass}]},{name:"清理的时间段",field:"day",formType:"select",setting:[{label:"3天",value:3},{label:"5天",value:5},{label:"7天",value:7},{label:"15天",value:15},{label:"30天",value:30},{label:"45天",value:45}]}],t.formAddDialogShow=!0});else if("changeInterview"==e)this.statusHandleChange("changeInterview");else if("cancelInterview"==e){this.formAddTitle="取消面试";var i=this.selectionList[0];this.formAddForm={cancelReason:"",interviewTime:i.interviewTime,interviewEmployeeName:i.interviewEmployeeName,otherInterviewEmployeeName:i.otherInterviewEmployeeName,stageNum:i.stageNum,interviewType:L.a.interviewTypeValue[i.interviewType]},this.formAddRules={},this.formAddFields=[{name:"面试时间",field:"interviewTime",formType:"text",disabled:!0,setting:[]},{name:"面试方式",field:"interviewType",formType:"text",disabled:!0,setting:[]},{name:"面试官",field:"interviewEmployeeName",formType:"text",disabled:!0,setting:[]},{name:"其他面试官",field:"otherInterviewEmployeeName",formType:"text",disabled:!0,setting:[]},{name:"面试轮次",field:"stageNum",formType:"text",disabled:!0,setting:[]},{name:"取消原因",field:"cancelReason",formType:"textarea",setting:[]}],this.formAddDialogShow=!0}},formAddPass:function(){var e=this;this.$refs.formAdddialog.loading=!0;var t=Object(C.v)(this.formAddForm);t.candidateIds=this.selectionList.map(function(e){return e.candidateId});var i=null;"changePost"===this.formAddCommand?i=d.k:"changeChannel"===this.formAddCommand?i=d.j:"clear"===this.formAddCommand?(i=d.l,t={candidateIds:this.clearList,status:7}):["interview","again","changeInterview","cancelInterview"].includes(this.formAddCommand)?(i="cancelInterview"===this.formAddCommand?d.n:d.m,"changeInterview"===this.formAddCommand?(t.candidateId=this.selectionList[0].candidateId,delete t.candidateIds):"cancelInterview"===this.formAddCommand&&(t={result:4,candidateId:this.selectionList[0].candidateId,cancelReason:this.formAddForm.cancelReason})):"eliminate"===this.formAddCommand&&(i=d.c),i(t).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.refreshList(),e.selectionList=[]}).catch(function(){e.$refs.formAdddialog.loading=!1})},formChange:function(e,t,i,a,n){"clear"==this.formAddCommand&&this.getEliminateData(n)},getEliminateData:function(e){var t=this;this.clearTips="",e.status&&0!=e.status.length?Object(d.e)({status:e.status,day:e.day}).then(function(i){t.clearList=i.data||[];var a=e.status.map(function(e){return L.a.statusValue[e]}).join("、");t.clearTips=a+"状态下，超过"+e.day+"天未改变状态的候选人共有"+t.clearList.length+"个，确认后都移到淘汰状态"}).catch(function(){}):this.clearList=[]},updateStatus:function(e){var t=this;this.loading=!0,Object(d.l)({candidateIds:this.selectionList.map(function(e){return e.candidateId}),status:e}).then(function(e){t.loading=!1,t.$message.success("操作成功"),t.refreshList(),t.selectionList=[]}).catch(function(){t.loading=!1})}}},D=(i("8vKi"),Object(k.a)(I,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"candidate-index",attrs:{id:"employee-main-container"}},[i("xr-header",{staticStyle:{padding:"0px 15px 15px 0"},attrs:{"ft-top":"0","icon-class":"wk wk-office","icon-color":"#2362FB",placeholder:"请输入姓名/手机号/邮箱",label:"候选人","show-search":"","search-icon-type":"icon"},on:{search:e.searchClick}},[i("template",{slot:"ft"},[e.hasFilterContent?i("el-button",{attrs:{type:"text"},on:{click:e.resetFilter}},[e._v("清除筛选")]):e._e(),e._v(" "),i("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:e.popoverFilterWidth,"field-from":e.filterObj,"field-list":e.filterList,"has-content":e.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(t){e.filterObj=t},sure:e.refreshList,reset:e.resetFilter,show:e.filterShowClick}}),e._v(" "),e.createAuth?i("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.createClick}},[e._v("新建候选人")]):e._e()],1)],2),e._v(" "),i("div",{staticClass:"crm-container"},[i("wk-border-menu",{attrs:{list:e.tabList,"is-select":""},on:{select:e.tabClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}}),e._v(" "),e.selectionList.length>0?i("xr-table-header",{attrs:{handles:e.tabelHandles,selects:e.selectionList},on:{command:e.handleCommand}},[e.selectionList.length>0?[e.noHandles?i("span",{attrs:{slot:"prefix"},slot:"prefix"}):[e.statusChangeHandles.length>0?i("span",{staticClass:"el-dropdown-link",attrs:{slot:"prefix"},slot:"prefix"},[i("span",{on:{click:function(t){e.statusHandleChange(e.statusChangeHandles[0].command)}}},[i("i",{staticClass:"wk wk-transfer "}),e._v("\n              "+e._s(e.statusChangeHandles[0].label)+"\n            ")]),e._v(" "),e.statusChangeHandles.length>1?i("el-dropdown",{on:{click:function(e){e.stopPropagation()},command:e.statusHandleChange}},[i("i",{staticClass:"el-icon-arrow-down el-icon--right"}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.statusChangeHandles,function(t,a){return i("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:0!=a,expression:"index != 0"}],key:t.command,attrs:{command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()],1):e._e(),e._v(" "),e.moreHandles.length>0?i("el-dropdown",{attrs:{slot:"suffix"},on:{command:e.moreHandlesChange},slot:"suffix"},[i("span",{staticClass:"el-dropdown-link is-more",staticStyle:{"margin-left":"15px"}},[i("i",{staticClass:"wk wk-transfer "}),e._v("\n              更多操作\n              "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreHandles,function(t,a){return i("el-dropdown-item",{key:a,attrs:{command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()]]:e._e()],2):e._e(),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",staticStyle:{width:"100%"},attrs:{id:"crm-table","row-height":40,data:e.list,height:e.tableHeight,"cell-class-name":e.cellClassName,"use-virtual":"",stripe:"",border:"","highlight-current-row":""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"",type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.fieldList,function(t,a){return i("el-table-column",{key:a,attrs:{fixed:0==a,prop:t.field,label:t.name,"min-width":t.width,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["status"==t.column.property?[i("span",{staticClass:"status-mark",style:e.getStatusStyle(t.row.status)}),e._v(" "),i("span",[e._v(e._s(e.fieldFormatter(t.row,t.column)))])]:[e._v("\n            "+e._s(e.fieldFormatter(t.row,t.column))+"\n          ")]]}}])})}),e._v(" "),i("el-table-column")],2),e._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.showDview?i("candidate-detail",{attrs:{id:e.rowID},on:{handle:e.detailHandle,close:function(t){e.showDview=!1}}}):e._e(),e._v(" "),e.isCreate?i("candidate-create-view",{attrs:{detail:e.handleRowData},on:{success:e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e(),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,width:1==e.formAddFields.length?"400px":"700px",fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formChange}},["clear"===e.formAddCommand?i("div",{staticStyle:{color:"#999","margin-bottom":"10px"},attrs:{slot:"top"},slot:"top"},[e._v("可根据未更改候选人简历状态的时间清理候选人")]):e._e(),e._v(" "),"clear"===e.formAddCommand?i("div",{staticStyle:{color:"#999","margin-top":"10px"}},[e._v(e._s(e.clearTips))]):e._e()]),e._v(" "),e.waitCreateShow?i("employee-create-view",{attrs:{detail:e.handleRowData,"create-type":e.formAddCommand},on:{success:e.refreshList,close:function(t){e.waitCreateShow=!1}}}):e._e()],1)},[],!1,null,"81da8806",null));D.options.__file="index.vue";t.default=D.exports},StgO:function(e,t,i){"use strict";i.d(t,"d",function(){return n}),i.d(t,"b",function(){return s}),i.d(t,"h",function(){return o}),i.d(t,"g",function(){return r}),i.d(t,"a",function(){return l}),i.d(t,"i",function(){return d}),i.d(t,"e",function(){return c}),i.d(t,"k",function(){return u}),i.d(t,"j",function(){return m}),i.d(t,"l",function(){return h}),i.d(t,"c",function(){return f}),i.d(t,"m",function(){return p}),i.d(t,"n",function(){return v}),i.d(t,"f",function(){return b});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmRecruitCandidate/queryById/"+e,method:"post"})}function s(e){return Object(a.a)({url:"hrmRecruitCandidate/deleteByIds",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a.a)({url:"hrmRecruitCandidate/queryCandidateStatusNum",method:"post"})}function r(e){return Object(a.a)({url:"hrmRecruitCandidate/queryPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a.a)({url:"hrmRecruitCandidate/addCandidate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a.a)({url:"hrmRecruitCandidate/setCandidate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a.a)({url:"hrmRecruitCandidate/queryCleanCandidateIds",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(a.a)({url:"hrmRecruitCandidate/updateCandidatePost",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(a.a)({url:"hrmRecruitCandidate/updateCandidateRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(a.a)({url:"hrmRecruitCandidate/updateCandidateStatus",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(a.a)({url:"hrmRecruitCandidate/eliminateCandidate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(a.a)({url:"hrmRecruitInterview/addBatchInterview",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(a.a)({url:"hrmRecruitInterview/setInterviewResult",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(a.a)({url:"hrmRecruitCandidate/queryFile/"+e,method:"post"})}},UzdC:function(e,t,i){"use strict";var a={name:"WkDetailHeader",components:{},props:{iconClass:[String,Array],iconBgColor:{type:String,default:"#ECEEF2"},iconColor:{type:String,default:"#42526E"},detailName:String,detailValue:String,defaultBodyShow:{type:Boolean,default:!0},dropdownItems:Array,showEdit:{type:Boolean,default:!1},editButtonClass:{type:String,default:"xr-btn--primary"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)},editClick:function(){this.$emit("edit")}}},n=(i("GpE+"),i("KHd+")),s=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"xr-detail-header"},[e.iconClass?i("div",{staticClass:"xr-detail-header__icon",style:{backgroundColor:e.iconBgColor}},[i("i",{class:e.iconClass,style:{color:e.iconColor}})]):e._e(),e._v(" "),i("div",{staticClass:"xr-detail-header__body"},[e._t("body"),e._v(" "),e.defaultBodyShow?[i("div",{staticClass:"detail-name"},[e._v(e._s(e.detailName))]),e._v(" "),i("div",{staticClass:"detail-value"},[e._v(e._s(e.detailValue))])]:e._e()],2),e._v(" "),i("div",{staticClass:"xr-detail-header__ft"},[e._t("ft"),e._v(" "),e.showEdit?i("el-button",{staticClass:"xr-detail-header--button",class:e.editButtonClass,staticStyle:{"margin-right":"10px"},attrs:{icon:"wk wk-circle-edit",type:"primary"},nativeOn:{click:function(t){return e.editClick(t)}}},[e._v("编辑")]):e._e(),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleTypeClick}},[i("el-button",{staticClass:"xr-detail-header--more",attrs:{icon:"el-icon-more"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,a){return i("el-dropdown-item",{key:a,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()],2)])},[],!1,null,"96fbdc42",null);s.options.__file="index.vue";t.a=s.exports},bxH2:function(e,t,i){"use strict";var a=i("GQeE"),n=i.n(a);function s(e){return n()(e).map(function(t){return{label:e[t],value:parseInt(t)}})}var o={1:"小学",2:"初中",3:"高中",4:"大专",5:"本科",6:"硕士",7:"博士"},r={1:"男",2:"女"},l=[{name:"姓名",field:"candidateName",formType:"text",isNull:1,setting:[]},{name:"手机号",field:"mobile",formType:"mobile",isNull:1,setting:[]},{name:"性别",field:"sex",formType:"radio",isNull:1,setting:s(r)},{name:"年龄",field:"age",formType:"number",setting:[]},{name:"邮箱",field:"email",formType:"email",setting:[]},{name:"应聘职位",field:"postId",formType:"post",isNull:1,setting:[]},{name:"工作年限",field:"workTime",formType:"number",setting:[]},{name:"学历",field:"education",formType:"select",isNull:1,setting:s(o)},{name:"毕业院校",field:"graduateSchool",formType:"text",setting:[]},{name:"最近工作单位",field:"latestWorkPlace",formType:"text",setting:[]},{name:"招聘渠道",field:"channelId",formType:"channel",setting:[]}];t.a={fields:l,tableFields:[{name:"姓名",field:"candidateName",width:80},{name:"应聘职位",field:"postId",width:120},{name:"用人部门",field:"deptName",width:120},{name:"候选人状态",field:"status",width:180},{name:"手机号",field:"mobile",width:160},{name:"性别",field:"sex",width:80},{name:"年龄",field:"age",width:80},{name:"邮箱",field:"email",width:160},{name:"招聘负责人",field:"ownerEmployeeName",width:115},{name:"工作年限",field:"workTime",width:80},{name:"学历",field:"education",width:80},{name:"毕业院校",field:"graduateSchool",width:80},{name:"最近工作单位",field:"latestWorkPlace",width:120},{name:"招聘渠道",field:"channelId",width:80},{name:"面试时间",field:"interviewTime",width:80},{name:"面试轮次",field:"stageNum",width:80},{name:"面试官",field:"interviewEmployeeName",width:80},{name:"面试方式",field:"interviewType",width:80},{name:"其他面试官",field:"otherInterviewEmployeeName",width:115},{name:"创建时间",field:"createTime",width:170}],educationValue:o,sexValue:r,getValueList:s,statusValue:{1:"新候选人",2:"初选通过",3:"安排面试",4:"面试通过",5:"已发offer",6:"待入职",7:"已淘汰",8:"已入职"},statusColorValue:{1:"#2362fb",2:"#ffc539",3:"#ffc539",4:"#20b559",5:"#20b559",6:"#ffc539",7:"#f95a5a",8:"#20b559"},statusKeyValue:{new:1,firstPass:2,interview:3,pass:4,offer:5,wait:6,eliminate:7,entry:8},interviewTypeValue:{1:"现场面试",2:"电话面试",3:"视频面试"},interviewResultValue:{1:"面试未完成",2:"面试通过",3:"面试未通过",4:"面试取消"}}},fC9G:function(e,t,i){"use strict";var a=i("A8zB");i.n(a).a},fUY0:function(e,t,i){"use strict";var a=i("2ENh");i.n(a).a},hmwI:function(e,t,i){"use strict";var a=i("sgVT");i.n(a).a},"j3/X":function(e,t,i){"use strict";var a=i("EP+0"),n=i("lMh0"),s={name:"WkBaseDetail",components:{CreateSections:a.a,WkBaseDetailSection:n.a},props:{list:Array,dropdownItems:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{sectionCommandSelect:function(e){this.$emit("top-command-select",e)}}},o=(i("+66p"),i("KHd+")),r=Object(o.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wk-base-detail"},e._l(e.list,function(t,a){return i("create-sections",{key:a,staticClass:"wk-base-detail__section",attrs:{title:t.name,"dropdown-items":e.dropdownItems,"content-height":"auto"},on:{"command-select":e.sectionCommandSelect}},[i("wk-base-detail-section",{attrs:{list:t.list}}),e._v(" "),i("div",{staticClass:"wk-base-detail__more",attrs:{slot:"header"},slot:"header"},[e._t("more")],2),e._v(" "),e._t("default")],2)}))},[],!1,null,"71978984",null);r.options.__file="index.vue";t.a=r.exports},lMh0:function(e,t,i){"use strict";var a={name:"WkBaseDetailSection",components:{},props:{list:Array,gutter:{type:Number,default:0},dropdownItems:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)}}},n=(i("NEL7"),i("KHd+")),s=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"wk-base-detail-section",attrs:{gutter:e.gutter,align:"stretch",wrap:"wrap"}},[e._l(e.list,function(t,a){return i("flexbox-item",{key:a,attrs:{span:t.span?t.span:.5}},[i("flexbox",{staticClass:"wk-base-detail-section__item",attrs:{align:"stretch"}},[i("div",{staticClass:"item-name"},[e._v(e._s(t.label))]),e._v(" "),i("div",{staticClass:"item-value"},[e._v(e._s(t.value))])])],1)}),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?i("el-dropdown",{staticClass:"wk-base-detail-section__more",attrs:{trigger:"hover"},on:{command:e.handleTypeClick}},[i("i",{staticClass:"el-icon-more",staticStyle:{cursor:"pointer"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,a){return i("el-dropdown-item",{key:a,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e(),e._v(" "),e._t("default")],2)},[],!1,null,"d0780fa2",null);s.options.__file="WkBaseDetailSection.vue";t.a=s.exports},mTwS:function(e,t,i){},nBZM:function(e,t,i){},ngFU:function(e,t,i){},oF75:function(e,t,i){"use strict";i.d(t,"c",function(){return n}),i.d(t,"b",function(){return s}),i.d(t,"e",function(){return o}),i.d(t,"d",function(){return r}),i.d(t,"a",function(){return l}),i.d(t,"f",function(){return d}),i.d(t,"h",function(){return c}),i.d(t,"g",function(){return u});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmRecruitPost/queryById/"+e,method:"post"})}function s(){return Object(a.a)({url:"hrmRecruitPost/queryAllRecruitPostList",method:"post"})}function o(e){return Object(a.a)({url:"hrmRecruitPost/queryPostStatusNum",method:"post"})}function r(e){return Object(a.a)({url:"hrmRecruitPost/queryRecruitPostPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a.a)({url:"hrmRecruitPost/addRecruitPost",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a.a)({url:"hrmRecruitPost/setRecruitPost",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a.a)({url:"hrmRecruitPost/updateRecruitPostStatus",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(){return Object(a.a)({url:"hrmRecruitPostType/queryPostType",method:"post"})}},sgVT:function(e,t,i){},tvUL:function(e,t,i){"use strict";var a=i("QbLZ"),n=i.n(a),s=i("StgO"),o=i("Ew9n"),r=i("UzdC"),l=i("j3/X"),d=i("CUKw"),c=i("7Qib"),u={name:"CandidateHandle",components:{},props:{id:[String,Number]},data:function(){return{loading:!1,list:[]}},computed:{},watch:{id:function(e){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(d.a)({type:3,typeId:this.id}).then(function(t){e.loading=!1;var i=t.data||[];i.forEach(function(e){e.content=e.content?JSON.parse(e.content):[]}),e.list=i}).catch(function(){e.loading=!1})},getYMDFormaterTime:function(e){return Object(c.A)(e)},getWeekFormaterTime:function(e){return Object(c.A)(e,"dddd")},getTimeFormaterTime:function(e){return Object(c.A)(e,"H:mm")}}},m=(i("fC9G"),i("KHd+")),h=Object(m.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"rc-cont"},e._l(e.list,function(t,a){return i("flexbox",{key:a,staticClass:"ha-cont",attrs:{align:"stretch",justify:"flex-start"}},[i("div",{staticClass:"ha-week"},[i("div",[e._v(e._s(e.getYMDFormaterTime(t.createTime)))]),e._v(" "),i("div",[e._v(e._s(e.getWeekFormaterTime(t.createTime)))])]),e._v(" "),i("div",{staticClass:"ha-circle"}),e._v(" "),i("div",{staticClass:"ha-time"},[e._v(e._s(e.getTimeFormaterTime(t.createTime)))]),e._v(" "),i("div",{staticClass:"ha-name"},[e._v(e._s(t.realname))]),e._v(" "),i("div",{staticClass:"ha-content"},e._l(t.content,function(t,a){return i("p",{key:a},[e._v(e._s(t))])})),e._v(" "),i("div",{staticClass:"ha-line"})])}))},[],!1,null,"3b227a32",null);h.options.__file="CandidateHandle.vue";var f=h.exports,p=i("KTTK"),v=i("tbm1"),b=i("PwLV"),g=i("ehos"),w={name:"CandidateFile",components:{WkFileSelect:b.a},props:{id:[String,Number],detail:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,list:[],fieldList:[],tableHeight:"400px",editDialog:!1,editForm:{name:"",data:{}}}},computed:{},watch:{id:function(e){this.list=[],this.getDetail()}},created:function(){var e=this;this.fieldList.push({prop:"name",width:"200",label:"附件名称"}),this.getDetail(),this.debouncedGetDetail=Object(g.debounce)(300,function(){e.getDetail()})},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s.f)(this.id).then(function(t){e.loading=!1,e.list=t.data.map(function(e){return e.size=Object(c.g)(e.size),e})}).catch(function(){e.loading=!1})},uploadFile:function(e,t){for(var i=this,a=0;a<e.length;a++){var n=e[a];this.$wkUploadFile.upload({request:v.g,file:n,params:{batchId:this.detail.batchId}}).then(function(e){i.debouncedGetDetail()}).catch(function(){})}t.target.value=""},handleRowClick:function(e,t,i){},showPreviewBtn:function(e){return Object(c.a)(e.row.name)},handleFile:function(e,t){var i=this;"preview"===e?Object(c.a)(t.row.name)?Object(c.E)(t.row.url,t.row.name):this.$wkPreviewFile.preview({index:t.$index,data:this.list}):"delete"===e?this.$confirm("您确定要删除该文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(v.b)(t.row.fileId).then(function(e){i.list.splice(t.$index,1),i.$bus.emit("crm-tab-num-update"),i.$message.success("操作成功")}).catch(function(){})}).catch(function(){i.$message({type:"info",message:"已取消操作"})}):"download"===e?Object(p.l)(t.row.url).then(function(e){var i=new Blob([e.data],{type:""});Object(c.d)(i,t.row.name)}).catch(function(){}):(this.editForm.data=t,this.editForm.name=t.row.name,this.editDialog=!0)},confirmEdit:function(){var e=this;this.editForm.name&&Object(v.f)({fileId:this.editForm.data.row.fileId,name:this.editForm.name}).then(function(t){e.$message.success("编辑成功"),e.editDialog=!1,e.list[e.editForm.data.$index].name=e.editForm.name}).catch(function(){})}}},y=(i("hmwI"),Object(m.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"file-index"},[i("div",{staticClass:"file-index__header"},[e.detail?i("wk-file-select",{staticStyle:{display:"inline-block"},attrs:{multiple:""},on:{change:e.uploadFile}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary"}},[e._v("上传材料附件")])],1):e._e()],1),e._v(" "),i("el-table",{attrs:{data:e.list,height:e.tableHeight,stripe:""},on:{"row-click":e.handleRowClick}},[e._l(e.fieldList,function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,"show-overflow-tooltip":""}})}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("flexbox",[i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){e.handleFile("preview",t)}}},[e._v("预览")]),e._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){e.handleFile("download",t)}}},[e._v("下载")]),e._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){e.handleFile("edit",t)}}},[e._v("重命名")]),e._v(" "),i("el-button",{staticStyle:{color:"#f94e4e"},attrs:{type:"text"},nativeOn:{click:function(i){e.handleFile("delete",t)}}},[e._v("删除")])],1)]}}])})],2),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.editDialog,title:"编辑",width:"400px"},on:{"update:visible":function(t){e.editDialog=t}}},[i("el-form",{attrs:{model:e.editForm}},[i("el-form-item",{attrs:{label:"新名称","label-width":"100"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.confirmEdit}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"20f5eeac",null));y.options.__file="CandidateFile.vue";var C=y.exports,_=i("P5Fn"),T=i("bxH2"),k=i("L2JU"),F={name:"CandidateDetail",components:{SlideView:o.a,WkDetailHeader:r.a,WkBaseDetail:l.a,CandidateHandle:f,CandidateFile:C,CandidateCreateView:_.a},props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body","org-tree-node-label"]}}},data:function(){return{loading:!1,detailData:null,tabCurrentName:"baseInfo",dropdownItems:[{icon:"wk wk-edit",label:"编辑",command:"edit"}],isCreate:!1}},computed:n()({},Object(k.b)(["hrm"]),{manageAuth:function(){return this.hrm.recruit&&this.hrm.recruit.manage},baseList:function(){if(this.detailData){for(var e=[],t=0;t<T.a.fields.length;t++){var i=T.a.fields[t],a={};a.label=i.name,a.value=this.fieldFormatter(this.detailData,i.field),e.push(a)}return e.push({label:"状态",value:this.fieldFormatter(this.detailData,"status")}),[{name:"",list:e}]}return[]}}),watch:{id:function(){this.detailData=null,this.getDetial()}},mounted:function(){},beforeDestroy:function(){},methods:{viewAfterEnter:function(){this.getDetial()},getDetial:function(){var e=this;this.loading=!0,Object(s.d)(this.id).then(function(t){e.detailData=t.data||{},e.loading=!1}).catch(function(){e.loading=!1,e.hideView()})},fieldFormatter:function(e,t){var i=T.a[t+"Value"];return i?i[e[t]]||"--":"postId"==t?(e.postName||"")+(0===e.postStatus?"（已停止招聘）":"")||"--":"channelId"==t?e.channelName||"--":e[t]||"--"},editClick:function(){this.isCreate=!0},editSuccess:function(){this.getDetial(),this.$emit("edit-success")},commandSelect:function(e){},hideView:function(){this.$emit("close")}}},j=(i("uCSV"),Object(m.a)(F,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[e.detailData?i("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[i("wk-detail-header",{attrs:{"show-edit":e.manageAuth},on:{edit:e.editClick,"command-select":e.commandSelect}},[i("div",{staticClass:"employee-header",attrs:{slot:"body"},slot:"body"},[i("div",{staticClass:"employee-header__top"},[i("span",{staticClass:"name"},[e._v(e._s(e.detailData.candidateName))])]),e._v(" "),i("div",{staticClass:"employee-header__bottom"},[1===e.detailData.sex||2===e.detailData.sex?i("el-tag",{staticClass:"xr-sex-tag",class:{1:"is-man",2:"is-woman"}[e.detailData.sex],attrs:{"disable-transitions":"",size:"mini"}},[i("i",{class:{1:"wk wk-man",2:"wk wk-woman"}[e.detailData.sex]})]):e._e(),e._v(" "),i("el-tooltip",{attrs:{content:"学历："+(e.fieldFormatter(e.detailData,"education")||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-cap-outline"}),e._v(e._s(e.fieldFormatter(e.detailData,"education")||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"工作年限："+(e.detailData.workTime||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-tool-cabinet"}),e._v(e._s(e.detailData.workTime||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"手机号："+(e.detailData.mobile||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-mobile"}),e._v(e._s(e.detailData.mobile||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"邮箱："+(e.detailData.email||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-email-outline",staticStyle:{"font-size":"14px"}}),e._v(e._s(e.detailData.email||"--")+"\n            ")])],1)],1)])]),e._v(" "),i("el-tabs",{staticClass:"side-detail__tabs--default",staticStyle:{flex:"1"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},[i("el-tab-pane",{attrs:{label:"详细资料",name:"baseInfo",lazy:""}},[i("wk-base-detail",{attrs:{list:e.baseList}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"材料附件",name:"file",lazy:""}},[i("candidate-file",{attrs:{id:e.id,detail:e.detailData}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"操作记录",name:"handle",lazy:""}},[i("candidate-handle",{attrs:{id:e.id}})],1)],1)],1):e._e(),e._v(" "),e.isCreate?i("candidate-create-view",{attrs:{detail:e.detailData},on:{success:e.getDetial,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,"106b4757",null));j.options.__file="Detail.vue";t.a=j.exports},uCSV:function(e,t,i){"use strict";var a=i("ngFU");i.n(a).a},w9wx:function(e,t,i){"use strict";var a=i("ImzK");i.n(a).a},z047:function(e,t,i){"use strict";var a=i("0ezy");i.n(a).a},zMw6:function(e,t,i){"use strict";i.d(t,"j",function(){return n}),i.d(t,"m",function(){return s}),i.d(t,"c",function(){return o}),i.d(t,"i",function(){return r}),i.d(t,"h",function(){return l}),i.d(t,"l",function(){return d}),i.d(t,"k",function(){return c}),i.d(t,"n",function(){return u}),i.d(t,"g",function(){return m}),i.d(t,"f",function(){return h}),i.d(t,"o",function(){return f}),i.d(t,"d",function(){return p}),i.d(t,"e",function(){return v}),i.d(t,"a",function(){return b}),i.d(t,"b",function(){return g}),i.d(t,"u",function(){return w}),i.d(t,"w",function(){return y}),i.d(t,"x",function(){return C}),i.d(t,"v",function(){return _}),i.d(t,"A",function(){return T}),i.d(t,"B",function(){return k}),i.d(t,"y",function(){return F}),i.d(t,"z",function(){return j}),i.d(t,"p",function(){return x}),i.d(t,"q",function(){return A}),i.d(t,"r",function(){return O}),i.d(t,"s",function(){return L}),i.d(t,"t",function(){return S});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmConfig/queryRecruitChannelList",method:"post",data:e})}function s(e){return Object(a.a)({url:"hrmConfig/saveRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a.a)({url:"hrmConfig/deleteRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a.a)({url:"hrmConfig/queryFields",method:"post",data:e})}function l(e){return Object(a.a)({url:"hrmConfig/queryFieldByLabel/"+e,method:"post"})}function d(e){return Object(a.a)({url:"hrmConfig/saveField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a.a)({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:e})}function u(e){return Object(a.a)({url:"hrmConfig/saveRecruitEliminate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(a.a)({url:"hrmConfig/queryAchievementTableList",method:"post",data:e})}function h(e){return Object(a.a)({url:"hrmConfig/queryAchievementTableById/"+e,method:"post"})}function f(e){return Object(a.a)({url:"hrmConfig/setAchievementTable",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(a.a)({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(a.a)({url:"hrmConfig/queryInsuranceSchemeById/"+e,method:"post"})}function b(e){return Object(a.a)({url:"hrmConfig/addInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(a.a)({url:"hrmConfig/deleteInsuranceScheme/"+e,method:"post"})}function w(e){return Object(a.a)({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(a.a)({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function C(e){return Object(a.a)({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function _(e){return Object(a.a)({url:"hrmSalaryGroup/delete/"+e,method:"post"})}function T(e){return Object(a.a)({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:e})}function k(e){return Object(a.a)({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function F(e){return Object(a.a)({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:e})}function j(e){return Object(a.a)({url:"hrmSalaryOption/setSalaryOption",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function x(){return Object(a.a)({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function A(e){return Object(a.a)({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(e){return Object(a.a)({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(e){return Object(a.a)({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:e})}function S(e){return Object(a.a)({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);